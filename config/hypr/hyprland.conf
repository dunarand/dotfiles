#######################
### HYPRLAND CONFIG ###
#######################


################
### MONITORS ###
################
monitor = HDMI-A-1, 1920x1080@75, 1920x0, 1


###################
### MY PROGRAMS ###
###################
$terminal     = ghostty
$fileManager  = dolphin
$browser      = google-chrome-stable
$editor       = nvim
$music        = spotify


#################
### AUTOSTART ###
#################
exec-once = /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1
exec-once = hypridle
exec-once = hyprpanel
exec-once = wl-paste --type text --watch cliphist store &
exec-once = wl-paste --type image --watch cliphist store &
exec-once = swww-daemon
exec-once = easyeffects --gapplication-service


exec-once = dbus-update-activation-environment --systemd DISPLAY WAYLAND_DISPLAY XDG_CURRENT_DESKTOP XAUTHORITY DBUS_SESSION_BUS_ADDRESS
exec-once = systemctl --user import-environment DISPLAY WAYLAND_DISPLAY XDG_CURRENT_DESKTOP XAUTHORITY DBUS_SESSION_BUS_ADDRESS
exec-once = /usr/bin/gnome-keyring-daemon --start --components=pkcs11,secrets,ssh


exec-once=hyprctl setcursor volantes_cursors 24

#############################
### ENVIRONMENT VARIABLES ###
#############################

# NVIDIA
env = GBM_BACKEND,nvidia-drm
env = __GLX_VENDOR_LIBRARY_NAME,nvidia
env = WLR_NO_HARDWARE_CURSORS,1
env = LIBVA_DRIVER_NAME,nvidia

# Cursors
env = XCURSOR_THEME,"volantes_cursors"
env = XCURSOR_SIZE,24
env = HYPRCURSOR_SIZE,24

# Qt
env = QT_QPA_PLATFORM,wayland;xcb
env = QT_QPA_PLATFORMTHEME,qt6ct
env = QT_STYLE_OVERRIDE,kvantum
env = QT_WAYLAND_DISABLE_WINDOWDECORATION,1
env = QT_AUTO_SCREEN_SCALE_FACTOR,1

# GTK / SDL / Clutter
env = GDK_BACKEND,wayland,x11,*
env = SDL_VIDEODRIVER,wayland
env = CLUTTER_BACKEND,wayland
env = GDK_SCALE,1
env = GDK_DPI_SCALE,1

# XDG session info
env = XDG_CURRENT_DESKTOP,Hyprland
env = XDG_SESSION_TYPE,wayland
env = XDG_SESSION_DESKTOP,Hyprland
env = XDG_MENU_PREFIX,arch-

# Performance
env = PROTON_ENABLE_NVAPI,1
env = DXVK_STATE_CACHE,1


###################
### PERMISSIONS ###
###################
# Empty


#####################
### LOOK AND FEEL ###
#####################
general {
    gaps_in         = 5
    gaps_out        = 5
    border_size     = 2
    resize_on_border = false
    allow_tearing   = false
    layout          = dwindle

    col.active_border = rgba(cba6f7ee) rgba(b4befeaa) 45deg
    col.inactive_border = rgba(585b70aa)
}

decoration {
    rounding        = 12
    rounding_power  = 2
    active_opacity  = 1.
    inactive_opacity = 1.

    shadow {
        enabled = true
        range = 12
        render_power = 3
        color = rgba(00000055)
    }

    blur {
        enabled = false
        # size = 3
        # passes = 2
        # vibrancy = 0.20
    }
}

animations {
    enabled = yes, please :)

    bezier = easeOutQuint,   0.23, 1,    0.32, 1
    bezier = easeInOutCubic, 0.65, 0.05, 0.36, 1
    bezier = linear,         0,    0,    1,    1
    bezier = almostLinear,   0.5,  0.5,  0.75, 1
    bezier = quick,          0.15, 0,    0.1,  1

    animation = global,        1, 10,    default
    animation = border,        1, 5.39,  easeOutQuint
    animation = windows,       1, 4.79,  easeOutQuint
    animation = windowsIn,     1, 4.1,   easeOutQuint, popin 87%
    animation = windowsOut,    1, 1.49,  linear,       popin 87%
    animation = fadeIn,        1, 1.73,  almostLinear
    animation = fadeOut,       1, 1.46,  almostLinear
    animation = fade,          1, 3.03,  quick
    animation = layers,        1, 3.81,  easeOutQuint
    animation = layersIn,      1, 4,     easeOutQuint, fade
    animation = layersOut,     1, 1.5,   linear,       fade
    animation = fadeLayersIn,  1, 1.79,  almostLinear
    animation = fadeLayersOut, 1, 1.39,  almostLinear
    animation = workspaces,    1, 1.94,  almostLinear, fade
    animation = workspacesIn,  1, 1.21,  almostLinear, fade
    animation = workspacesOut, 1, 1.94,  almostLinear, fade
    animation = zoomFactor,    1, 7,     quick
}

dwindle {
    pseudotile      = true
    preserve_split  = true
}

master {
    new_status = master
}

misc {
    force_default_wallpaper = -1
    disable_hyprland_logo   = false
}


#############
### INPUT ###
#############
input {
    kb_layout      = us,tr
    repeat_rate    = 32
    repeat_delay   = 500
    sensitivity    = 1.0
    force_no_accel = true
    follow_mouse   = 1
}


###################
### KEYBINDINGS ###
###################

# Power / Session / General Commands
bind = SUPER, ESCAPE, exec, pkill wlogout || wlogout --buttons-per-row 5 # Power Menu
bind = SUPER CTRL, L, exec, hyprlock # Lock Screen
bind = SUPER SHIFT, DELETE, exec, command -v hyprshutdown >/dev/null 2>&1 && hyprshutdown || hyprctl dispatch exit # Shutdown Hyprland
bind = SUPER, F5, exec, hyprctl reload && notify-send "Hyprland" "Configuration reloaded" # Reload Hyprland
bind = SUPER SHIFT, B, exec, hyprpanel -q && hyprpanel # Reload Hyprpanel
bind = SUPER, F1, exec, ~/.config/hypr/scripts/keyboard-layout.sh # Switch Keyboard Layout

# Window actions
bind = SUPER, F, fullscreen # Fullscreen
bind = SUPER, C, centerwindow # Center
bind = SUPER, X, killactive # Close
bind = SUPER SHIFT, X, forcekillactive # Force Close
bind = SUPER SHIFT, F, exec, ~/.config/hypr/scripts/toggle-float-center.sh # Toggle Float
bind = SUPER SHIFT, O, pseudo # ignore
bind = SUPER SHIFT, P, togglesplit # ignore

# Launchers
bind = SUPER, T, exec, $terminal # Terminal
bind = SUPER, E, exec, $fileManager # File Manager
bind = SUPER, B, exec, $browser # Browser
bind = SUPER CTRL SHIFT, C, exec, $terminal -e nvim ~/.config/hypr/hyprland.conf # Hyprland config
bind = SUPER ALT, SPACE, exec, ~/.config/hypr/scripts/chrome-search.sh # Web Search
bind = SUPER SHIFT, N, exec, $terminal -e nvim # Neovim
bind = SUPER, S, exec, hyprctl dispatch exec "[float; size 900 600]" "$terminal -e fs.sh" # File Search
bind = SUPER, SPACE, exec, pkill rofi || rofi -show drun # Application Launcher
bind = SUPER SHIFT, R, exec, pkill rofi || rofi -show run # Command Runner
bind = SUPER, TAB, exec, pkill rofi || rofi -show window # Cycle Windows
bind = SUPER, Q, exec, ~/.config/hypr/scripts/keybinds.sh # Keybinds
bind = SUPER CTRL, SPACE, exec, ~/.config/hypr/scripts/layout-manager.sh # Layout Menu

# Utilities / Scripts
bind = SUPER, R, exec, ~/.config/hypr/scripts/resize-toggle.sh # Resize Window
bind = SUPER, V, exec, sh -c "cliphist list | rofi -dmenu | cliphist decode | wl-copy" # Clipboard History
bind = SUPER SHIFT, C, exec, hyprpicker # Color Picker
bind = SUPER SHIFT, A, exec, ~/.config/easyeffects/scripts/preset-cycle.sh # Cycle Audio Profile
bind = SUPER, W, exec, ~/.config/hypr/scripts/wallpaper-switch.sh # Cycle Wallpaper
bind = SUPER SHIFT, W, exec, ~/.config/hypr/scripts/wallpaper-mood.sh # Cycle Wallpaper Theme
bind = SUPER ALT, W, exec, ~/.config/hypr/scripts/wallpaper-auto.sh # Toggle Auto Wallpaper Cycle

# Hyprpanel
bind = SUPER, D, exec, hyprpanel toggleWindow dashboardmenu # Start Menu
bind = SUPER, M, exec, hyprpanel toggleWindow mediamenu # Media Controls
bind = SUPER, A, exec, hyprpanel toggleWindow audiomenu # Audio Controls
bind = SUPER, N, exec, hyprpanel toggleWindow notificationsmenu # Notifications

# Screenshots
bind = SUPER CTRL, S, exec, sh -c 'sel=$(slurp) || exit; f="$HOME/Pictures/Screenshots/$(date +%Y-%m-%d_%H-%M-%S).png"; grim -g "$sel" "$f"; hyprctl dispatch exec "[float;size 1280 720;center]" "gwenview \"$f\""; notify-send -r 999 -u low -i "$f" "Area screenshot saved" "$f"' # Area Screenshot & Edit
bind = SUPER SHIFT, S, exec, sh -c 'sel=$(slurp) || exit; f="$HOME/Pictures/Screenshots/$(date +%Y-%m-%d_%H-%M-%S).png"; grim -g "$sel" "$f"; wl-copy < "$f"; notify-send -r 999 -u low -i "$f" "Area screenshot copied" "$f"' # Area Screenshot
bind = SUPER ALT, S, exec, sh -c 'last=$(ls -t "$HOME"/Pictures/Screenshots/*.png 2>/dev/null | head -n1); [ -n "$last" ] && hyprctl dispatch exec "[float;size 1280 720;center]" "gwenview \"$last\""' # Open Last Screenshot

# Moving focus
bind = SUPER, H, movefocus, l # Focus Left Window
bind = SUPER, L, movefocus, r # Focus Right Window
bind = SUPER, K, movefocus, u # Focus Up Window
bind = SUPER, J, movefocus, d # Focus Down Window
bind = ALT, TAB, cyclenext # Cycle Focus

# Moving windows
bind = SUPER SHIFT, H, movewindow, l # Move Window to Left
bind = SUPER SHIFT, L, movewindow, r # Move Window to Right
bind = SUPER SHIFT, K, movewindow, u # Move Window to Up
bind = SUPER SHIFT, J, movewindow, d # Move Window to Down

# Workspaces
bind = SUPER, 1, workspace, 1 # Workspace 1
bind = SUPER, 2, workspace, 2 # Workspace 2
bind = SUPER, 3, workspace, 3 # Workspace 3
bind = SUPER, 4, workspace, 4 # Workspace 4
bind = SUPER, 5, workspace, 5 # Workspace 5
bind = SUPER, 6, workspace, 6 # Workspace 6
bind = SUPER, 7, workspace, 7 # Workspace 7
bind = SUPER, 8, workspace, 8 # Workspace 8
bind = SUPER, 9, workspace, 9 # Workspace 9

bind = SUPER SHIFT, 1, movetoworkspace, 1 # Move Window to Workspace 1
bind = SUPER SHIFT, 2, movetoworkspace, 2 # Move Window to Workspace 2
bind = SUPER SHIFT, 3, movetoworkspace, 3 # Move Window to Workspace 3
bind = SUPER SHIFT, 4, movetoworkspace, 4 # Move Window to Workspace 4
bind = SUPER SHIFT, 5, movetoworkspace, 5 # Move Window to Workspace 5
bind = SUPER SHIFT, 6, movetoworkspace, 6 # Move Window to Workspace 6
bind = SUPER SHIFT, 7, movetoworkspace, 7 # Move Window to Workspace 7
bind = SUPER SHIFT, 8, movetoworkspace, 8 # Move Window to Workspace 8
bind = SUPER SHIFT, 9, movetoworkspace, 9 # Move Window to Workspace 9

# Mouse interactions
bindm = SUPER, mouse:272, movewindow # ignore
bindm = SUPER, mouse:273, resizewindow # ignore
bind  = SUPER, mouse:274, killactive # ignore

# Media keys
bind = SUPER, F10, exec, playerctl previous # Previous Track
bind = SUPER, F11, exec, playerctl play-pause # Play/Pause
bind = SUPER, F12, exec, playerctl next # Next Track

# Keyboard/Mouse Special/Extra Keys
bind = , XF86AudioRaiseVolume, exec, ~/.config/hypr/scripts/vol-up.sh
bind = , XF86AudioLowerVolume, exec, ~/.config/hypr/scripts/vol-down.sh
bind = , XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bind = SUPER, XF86AudioMute, exec, playerctl play-pause # ignore
bind = , XF86AudioPlay, exec, playerctl play-pause # ignore
bind = SUPER, XF86AudioRaiseVolume, exec, playerctl next # ignore
bind = SUPER, XF86AudioLowerVolume, exec, playerctl previous # ignore
bind = , mouse:BTN_SIDE, exec, hyprctl dispatch keybind BACK # ignore
bind = , mouse:BTN_EXTRA, exec, hyprctl dispatch keybind FORWARD # ignore
bind = , XF86AudioNext, exec, playerctl next # ignore
bind = , XF86AudioPrev, exec, playerctl previous # ignore

bind = ALT, right, sendshortcut, , END, # ignore
bind = ALT, left, sendshortcut, , HOME, # ignore
bind = ALT, up, sendshortcut, , PAGE_UP, # ignore
bind = ALT, down, sendshortcut, , PAGE_DOWN, # ignore

# Cursor zoom
bind = SUPER, mouse_down, exec, hyprctl -q keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor -j | jq '.float * 1.5') # ignore
bind = SUPER, mouse_up,   exec, hyprctl -q keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor -j | jq '(.float * 0.5) | if . < 1 then 1 else . end') # ignore
bind = SUPER SHIFT, mouse_up,   exec, hyprctl -q keyword cursor:zoom_factor 1 # ignore
bind = SUPER SHIFT, mouse_down, exec, hyprctl -q keyword cursor:zoom_factor 1 # ignore


##############################
### WINDOWS AND WORKSPACES ###
##############################

windowrule {
    name = suppress-maximize-events
    match:class = .*
    suppress_event = maximize
}

windowrule {
    name = fix-xwayland-drags
    match:class = ^$
    match:title = ^$
    match:xwayland = true
    match:float = true
    match:fullscreen = false
    match:pin = false
    no_focus = true
}

windowrule {
    name = move-hyprland-run
    match:class = hyprland-run
    move = 20 monitor_h-120
    float = yes
}

windowrule {
    name = global-rounding
    match:class = .*
    rounding = 12
}

source = ~/.config/hypr/windowrules.conf
